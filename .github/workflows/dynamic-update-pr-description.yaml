name: Update PR Description with Dynamic Values

on:
  pull_request:
    types: [opened]

jobs:
  update-pr-description:
    runs-on: ubuntu-latest

    steps:
      - name: Update PR Description
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          PR_NUMBER=${{ github.event.number }}
          BRANCH_NAME=${{ github.event.pull_request.head.ref }}
          CURRENT_DESCRIPTION="${{ github.event.pull_request.body }}"
          UPDATED_DESCRIPTION=$(
          echo "$CURRENT_DESCRIPTION" |
          sed "s/PR_NUMBER/$PR_NUMBER/g" |
          sed "s/BRANCH_NAME/$BRANCH_NAME/g"
          )
          gh pr edit $PR_NUMBER --body "$UPDATED_DESCRIPTION"
